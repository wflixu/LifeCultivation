# 《人生修行》App 产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品简介
**《人生修行》** 是一款专注于个人习惯养成与自律提升的iOS应用。通过游戏化的评分系统和数据可视化，帮助用户建立健康的生活习惯，追踪个人成长轨迹。

### 1.2 产品定位
- **目标用户**：希望改善生活习惯、提升自律能力的个人用户
- **核心价值**：量化自律、可视化进步、游戏化激励
- **差异化**：简洁的10分制评分系统 + 深度趋势分析

### 1.3 版本规划
- **v1.0**：基础评分与趋势查看（当前版本）
- **v1.1**：通知提醒、成就系统
- **v1.2**：iCloud同步、macOS版本
- **v2.0**：社交功能、个性化挑战

## 2. 核心功能需求

### 2.1 每日评分系统
#### 2.1.1 健康饮食评分 (3分)
**评分规则：**
- 基础分3分，采用扣分制
- 三餐不规律：扣1分
- 吃辛辣食物：扣1分  
- 吃垃圾食品：扣1分
- 最低0分

**用户交互：**
- 三个开关控件分别对应三项要求
- 实时显示当前得分

#### 2.1.2 规律作息评分 (3分)
**评分规则：**
- 基础分3分，采用扣分制
- 未按时早睡：扣1.5分
- 未按时早起：扣1.5分
- 最低0分

**用户交互：**
- 两个开关控件分别对应早睡和早起
- 目标时间在设置中配置

#### 2.1.3 屏幕时间控制 (4分)
**评分规则：**
- ≤30分钟：4分
- 31-60分钟：2分
- >60分钟：0分

**用户交互：**
- 滑块控件，范围0-180分钟
- 实时显示当前时间和对应分数

#### 2.1.4 锻炼记录
**功能说明：**
- 记录当日是否锻炼
- 用于计算周度奖励分
- 每周完成3次锻炼可获得奖励

### 2.2 数据可视化
#### 2.2.1 趋势图表
**时间范围：**
- 最近一周
- 最近一月  
- 最近一季
- 最近半年
- 最近一年

**图表类型：**
- 折线图：显示总分趋势
- 统计卡片：显示平均分和记录天数

#### 2.2.2 详细记录
**展示内容：**
- 日期列表（倒序）
- 各项分数明细
- 总分和评级
- 备注信息

### 2.3 个性化设置
#### 2.3.1 目标设置
- 起床时间配置
- 睡觉时间配置
- 屏幕时间限制配置

#### 2.3.2 数据管理
- 数据导出功能
- 数据重置功能
- 本地数据备份

## 3. 技术规格

### 3.1 开发环境
```yaml
开发语言: Swift
UI框架: SwiftUI
数据持久化: SwiftData
目标系统: iOS 26+
设备支持: iPhone
架构模式: MVVM
```

### 3.2 数据模型设计
#### 3.2.1 DailyRecord（每日记录）
```swift
@Model
final class DailyRecord {
    var date: Date                    // 记录日期
    var dietScore: Int               // 饮食得分 0-3
    var sleepScore: Int              // 作息得分 0-3  
    var screenTimeScore: Int         // 屏幕得分 0-4
    var exerciseCompleted: Bool      // 是否锻炼
    var note: String?                // 备注信息
    
    // 计算属性
    var totalScore: Int              // 总分 0-10
    var rating: String               // 评级文字
}
```

#### 3.2.2 AppSettings（应用设置）
```swift
@Model
final class AppSettings {
    var wakeUpTime: Date             // 目标起床时间
    var bedTime: Date                // 目标睡觉时间
    var screenTimeLimit: Int         // 屏幕时间限制
}
```

### 3.3 界面架构
```
ContentView (TabView)
├── TodayView (今日评分)
│   ├── ScoreCardView (分数卡片)
│   ├── DietSectionView (饮食模块)
│   ├── SleepSectionView (作息模块)
│   ├── ScreenTimeSectionView (屏幕时间)
│   ├── ExerciseSectionView (锻炼模块)
│   ├── NoteSectionView (备注模块)
│   └── SaveButtonView (保存按钮)
├── HistoryView (历史趋势)
│   ├── AverageScoreCard (平均分卡片)
│   ├── ScoreChartView (趋势图表)
│   └── RecordListView (记录列表)
└── SettingsView (设置页面)
```

## 4. 用户体验设计

### 4.1 视觉设计原则
- **简洁明了**：避免复杂操作，一键式评分
- **直观反馈**：实时显示分数变化和评级
- **情感化设计**：使用鼓励性语言和积极的颜色反馈
- **一致性**：统一的橙色主题色和圆角设计

### 4.2 交互流程
#### 4.2.1 每日记录流程
```
打开App → 自动加载今日记录 → 调整各项评分 → 实时预览总分 → 保存记录
```

#### 4.2.2 历史查看流程  
```
切换至历史页 → 选择时间范围 → 查看趋势图表 → 浏览详细记录
```

### 4.3 评级系统设计
| 分数范围 | 评级 | 颜色 | 描述 |
|---------|------|------|------|
| 10分 | 自律大师 | 绿色 | 完美表现 |
| 8-9分 | 高手 | 蓝色 | 优秀表现 |
| 6-7分 | 践行者 | 青色 | 稳定达标 |
| 4-5分 | 新手 | 橙色 | 需要改进 |
| 0-3分 | 休整日 | 红色 | 重新开始 |

## 5. 业务规则

### 5.1 评分计算规则
```swift
// 总分计算
totalScore = dietScore + sleepScore + screenTimeScore

// 饮食得分计算
dietScore = 3 - (missedMeals ? 1 : 0) - (ateSpicy ? 1 : 0) - (ateJunk ? 1 : 0)

// 作息得分计算  
sleepScore = (wakeOnTime ? 1.5 : 0) + (sleepOnTime ? 1.5 : 0)

// 屏幕时间得分计算
screenTimeScore = {
    time ≤ 30min: 4分
    time 31-60min: 2分  
    time > 60min: 0分
}
```

### 5.2 数据验证规则
- 日期唯一性：同一天只能有一条记录
- 分数范围验证：各分项分数必须在合理范围内
- 时间有效性：设置的时间必须合理（起床时间早于睡觉时间）

## 6. 性能要求

### 6.1 响应时间
- 页面加载：< 1秒
- 数据保存：< 0.5秒
- 图表渲染：< 2秒

### 6.2 数据存储
- 本地存储：使用SwiftData进行设备本地存储
- 数据容量：支持至少5年的每日记录存储
- 备份机制：支持数据导出备份

## 7. 发布计划

### 7.1 v1.0 MVP功能
- [x] 基础评分系统
- [x] 数据本地存储
- [x] 趋势图表展示
- [x] 个性化设置

### 7.2 v1.1 增强功能
- [ ] 每日提醒通知
- [ ] 成就勋章系统
- [ ] 数据导出功能
- [ ] 小组件支持

### 7.3 v1.2 扩展功能
- [ ] iCloud数据同步
- [ ] macOS版本适配
- [ ] 健康数据集成

## 8. 成功指标

### 8.1 产品指标
- **用户留存**：7日留存率 > 70%
- **使用频率**：日均使用时长 > 2分钟
- **功能完成**：评分功能使用率 > 90%

### 8.2 业务指标
- **习惯改善**：用户平均分数月度提升
- **坚持度**：连续记录天数分布
- **满意度**：用户自评习惯改善程度

## 9. 风险与挑战

### 9.1 技术风险
- **数据丢失**：通过定期备份和数据导出降低风险
- **性能问题**：大数据量下的图表渲染性能优化

### 9.2 产品风险  
- **用户粘性**：通过游戏化设计和长期价值展示提升粘性
- **功能单一**：通过后续版本迭代丰富产品功能

## 10. 附录

### 10.1 术语表
- **修行**：指改善生活习惯的过程
- **评级**：根据每日得分给出的评价等级
- **周度奖励**：完成每周锻炼目标的额外加分

### 10.2 设计参考
- 颜色主题：橙色(#FF9500)为主色调
- 字体系统：San Francisco系统字体
- 图标资源：SF Symbols

---

**文档版本**：v1.0  
**最后更新**：2025年11月  
**维护者**：产品开发团队